generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model cwpmitglieder {
  id                  String?   @db.VarChar(3)
  nachname            String?   @db.VarChar(28)
  vorname             String?   @db.VarChar(11)
  geschlecht          String?   @db.VarChar(10)
  titel               String?   @db.VarChar(10)
  plz                 String?   @db.VarChar(4)
  ort                 String?   @db.VarChar(25)
  strasse             String?   @db.VarChar(30)
  geburtsdatum        DateTime? @db.Date
  mitgliedsnummer     String?   @db.VarChar(15)
  schuetzenpassnummer Int?
  handy               String?   @db.VarChar(19)
  tel1                String?   @db.VarChar(24)
  email               String?   @db.VarChar(29)
  tel2                String?   @db.VarChar(15)
  landesverband       Boolean
  status              String?   @db.VarChar(36)
  schluessel          Boolean
  notizen             String?   @db.VarChar(62)
  beitrittsdatum      DateTime? @db.Date

  @@ignore
}

model email {
  email_id         Int                @id @default(autoincrement()) @db.UnsignedInt
  email_adresse    String?            @unique(map: "unique_email_adresse") @db.VarChar(45)
  person_hat_email person_hat_email[]
}

model geschlecht {
  geschlecht_id Int      @id @default(autoincrement()) @db.UnsignedInt
  geschlecht    String   @unique(map: "unique_geschlecht") @db.VarChar(1)
  person        person[]
}

model mitgliedschaftszeitraum {
  mitgliedschaftszeitraum_id Int       @id @default(autoincrement()) @db.UnsignedInt
  von                        DateTime? @db.Date
  bis                        DateTime? @db.Date
  person_id                  Int       @db.UnsignedInt
  person                     person    @relation(fields: [person_id], references: [person_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_mitgliedschaftszeitraum_person")

  @@index([person_id], map: "idx_person")
}

model person {
  person_id                   Int                        @id @default(autoincrement()) @db.UnsignedInt
  vorname                     String                     @db.VarChar(45)
  nachname                    String                     @db.VarChar(45)
  geburtsdatum                DateTime?                  @db.Date
  mitgliedsnummer             Int?                       @unique(map: "unique_mitgliedsnummer") @db.UnsignedInt
  schuetzenpassnummer         Int?                       @unique(map: "unique_schuetzenpassnummer") @db.UnsignedInt
  strasse                     String?                    @db.VarChar(45)
  ort                         String?                    @db.VarChar(45)
  plz                         String?                    @db.VarChar(45)
  geschlecht_id               Int                        @db.UnsignedInt
  ist_landesverband_gemeldet  Int                        @db.UnsignedTinyInt
  hat_schluessel_suessenbrunn Int                        @db.UnsignedTinyInt
  rolle_id                    Int                        @db.UnsignedInt
  status_id                   Int                        @db.UnsignedInt
  notiz                       String?                    @db.Text
  mitgliedschaftszeitraum     mitgliedschaftszeitraum[]
  geschlecht                  geschlecht                 @relation(fields: [geschlecht_id], references: [geschlecht_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_geschlecht")
  rolle                       rolle                      @relation(fields: [rolle_id], references: [rolle_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_rolle")
  status                      status                     @relation(fields: [status_id], references: [status_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_status")
  person_hat_email            person_hat_email[]
  person_hat_telefonnummer    person_hat_telefonnummer[]
  person_hat_titel            person_hat_titel[]

  @@index([geschlecht_id], map: "idx_geschlecht")
  @@index([rolle_id], map: "idx_rolle")
  @@index([status_id], map: "idx_status")
}

model person_hat_telefonnummer {
  person_id        Int           @db.UnsignedInt
  telefonnummer_id Int           @db.UnsignedInt
  person           person        @relation(fields: [person_id], references: [person_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_hat_telefonnummer_person")
  telefonnummer    telefonnummer @relation(fields: [telefonnummer_id], references: [telefonnummer_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_hat_telefonnummer_telefonnummer")

  @@id([person_id, telefonnummer_id])
  @@index([person_id], map: "idx_person_telefonnummer")
  @@index([telefonnummer_id], map: "idx_telefonnummer")
}

model person_hat_titel {
  person_id Int    @db.UnsignedInt
  titel_id  Int    @db.UnsignedInt
  person    person @relation(fields: [person_id], references: [person_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_hat_titel_person")
  titel     titel  @relation(fields: [titel_id], references: [titel_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_hat_titel_titel")

  @@id([person_id, titel_id])
  @@index([person_id], map: "idx_person_titel")
  @@index([titel_id], map: "idx_titel")
}

model status {
  status_id          Int      @id @default(autoincrement()) @db.UnsignedInt
  status_bezeichnung String   @unique(map: "unique_status_bezeichnung") @db.VarChar(45)
  person             person[]
}

model telefonnummer {
  telefonnummer_id         Int                        @id @default(autoincrement()) @db.UnsignedInt
  telefonnummer            String?                    @db.VarChar(45)
  telefonnummer_typ_id     Int                        @db.UnsignedInt
  person_hat_telefonnummer person_hat_telefonnummer[]
  telefonnummer_typ        telefonnummer_typ          @relation(fields: [telefonnummer_typ_id], references: [telefonnummer_typ_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_telefonnummer_typ")

  @@index([telefonnummer_typ_id], map: "idx_telefonnummer_typ")
}

model telefonnummer_typ {
  telefonnummer_typ_id Int             @id @default(autoincrement()) @db.UnsignedInt
  telefonnummer_typ    String          @unique(map: "unique_telefonnummer_typ") @db.VarChar(45)
  telefonnummer        telefonnummer[]
}

model titel {
  titel_id         Int                @id @default(autoincrement()) @db.UnsignedInt
  titel            String             @unique(map: "unique_titel") @db.VarChar(45)
  person_hat_titel person_hat_titel[]
}

model rolle {
  rolle_id          Int      @id @default(autoincrement()) @db.UnsignedInt
  rolle_bezeichnung String   @unique(map: "unique_rolle_bezeichnung") @db.VarChar(45)
  person            person[]
}

model person_hat_email {
  person_id Int    @db.UnsignedInt
  email_id  Int    @db.UnsignedInt
  email     email  @relation(fields: [email_id], references: [email_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_email_person")
  person    person @relation(fields: [person_id], references: [person_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_person_email")

  @@id([person_id, email_id])
  @@index([email_id], map: "idx_email")
  @@index([person_id], map: "idx_person_email")
}
